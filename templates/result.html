{% extends "base.html" %}

{% block content %}
<div class="result-content">
    <div class="result-header">
        <a href="{{ url_for('index') }}" class="back-button">‚Üê –ù–∞–∑–∞–¥</a>
        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞</h2>
    </div>

    <div class="result-grid">
        <div class="result-left">
            <div class="image-section">
                <h3>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º–æ–µ —Ñ–æ—Ç–æ</h3>
                <div class="image-container">
                    <img src="data:image/jpeg;base64,{{ image_with_face }}" alt="Analyzed photo">
                </div>
            </div>
            
            <div class="parameters-section">
                <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∞–ª–∏–∑–∞</h3>
                <div class="parameters-grid">
                    <div class="parameter-card">
                        <div class="parameter-icon">üå°Ô∏è</div>
                        <div class="parameter-info">
                            <span class="parameter-name">–¢–µ–ø–ª–æ—Ç–∞</span>
                            <span class="parameter-value">{{ "%.1f"|format(features.warmth) }}</span>
                        </div>
                    </div>
                    <div class="parameter-card">
                        <div class="parameter-icon">üí°</div>
                        <div class="parameter-info">
                            <span class="parameter-name">–Ø—Ä–∫–æ—Å—Ç—å</span>
                            <span class="parameter-value">{{ "%.1f"|format(features.brightness) }}</span>
                        </div>
                    </div>
                    <div class="parameter-card">
                        <div class="parameter-icon">üé®</div>
                        <div class="parameter-info">
                            <span class="parameter-name">–ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å</span>
                            <span class="parameter-value">{{ "%.1f"|format(features.saturation) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="result-right">
            <div class="main-result color-{{ prediction }}">
                <div class="result-icon"></div>
                <div class="result-text">
                    <h3>–í–∞—à —Ü–≤–µ—Ç–æ—Ç–∏–ø</h3>
                    <h1 class="color-{{ prediction }}-text">{{ prediction_text }}</h1>
                </div>
            </div>

            <div class="probabilities-section">
                <h3>üìà –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏</h3>
                {% for prob in probabilities %}
                <div class="probability-item">
                    <div class="probability-header">
                        <span class="probability-name">{{ prob.name }}</span>
                        <span class="probability-value">{{ prob.value }}%</span>
                    </div>
                    <div class="probability-bar">
                        <div class="probability-fill" 
                             data-width="{{ prob.value }}" 
                             data-color="{{ prob.color }}"
                             data-color-type="{{ prob.name|lower|replace('Ô∏è', '')|replace(' ', '-') }}">
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="recommendations-section">
                <h3>üíé –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
                <div class="recommendation-card">
                    <h4>{{ recommendations.title }}</h4>
                    <div class="recommendation-item">
                        <strong>üíÑ –ú–∞–∫–∏—è–∂:</strong> {{ recommendations.makeup }}
                    </div>
                    <div class="recommendation-item">
                        <strong>üëó –¶–≤–µ—Ç–∞:</strong> {{ recommendations.colors }}
                    </div>
                    <div class="recommendation-item">
                        <strong>üíé –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã:</strong> {{ recommendations.accessories }}
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <a href="{{ url_for('index') }}" class="new-analysis-button">
                    üîÑ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ
                </a>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const probabilityFills = document.querySelectorAll('.probability-fill');
    probabilityFills.forEach(element => {
        const width = element.getAttribute('data-width');
        const color = element.getAttribute('data-color');
        
        if (width && color) {
            element.style.width = width + '%';
            element.style.backgroundColor = color;
        }
    });
});
</script>
{% endblock %}